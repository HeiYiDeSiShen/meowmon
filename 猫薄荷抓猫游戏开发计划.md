# 🎮 Meowmon 游戏开发计划 - 猫薄荷抓猫机制

## 📋 项目概述
基于现有的Raylib游戏框架，实现一个"猫薄荷抓猫"的互动游戏机制。玩家需要使用猫薄荷来吸引猫咪，趁机抓取它们。

## 🎯 核心功能需求

### 1. 🐱 猫咪AI状态机
- **正常状态**：随机移动，自由巡逻
- **逃跑状态**：玩家靠近时高速逃跑（2倍速度）
- **沉迷状态**：被猫薄荷吸引，缓慢移动，可被抓取

### 2. 🌿 猫薄荷系统
- **抛出机制**：玩家按空格键抛出猫薄荷
- **抛物线轨迹**：模拟真实抛物线运动
- **范围效果**：落地后产生吸引范围
- **持续时间**：5秒沉迷时间

### 3. 🎮 互动机制
- **逃跑触发**：玩家150像素范围内触发逃跑
- **吸引触发**：猫薄荷100像素范围内触发吸引
- **抓取条件**：只有沉迷状态可被抓取

## 📁 文件结构

### 新增文件
```
src/entities/Catnip.hpp      - 猫薄荷类头文件
src/entities/Catnip.cpp      - 猫薄荷类实现
```

### 修改文件
```
src/entities/Cat.hpp         - 添加状态机和AI方法
src/entities/Cat.cpp         - 实现状态转换逻辑及像素艺术渲染
src/entities/Player.hpp      - 添加猫薄荷功能
src/entities/Player.cpp      - 实现抛出逻辑
src/main.cpp                 - 集成新机制
CMakeLists.txt               - 添加新源文件
```

## 🎨 视觉艺术与反馈 (最新更新)

### 1. 🐱 灵魂像素艺术风格 (Seamless Pixel Art)
- **无缝实体渲染**：采用 3.5px 像素网格，通过“过度渲染”消除网格间隙，打造坚实的像素实体感。
- **动态转向系统**：猫咪会根据水平速度自动转向，眼睛、胡须、尾巴和瞳孔位置随之同步翻转。
- **生命感动画**：
    - **呼吸效果**：静止时有轻微的像素级起伏缩放。
    - **活泼步态**：移动时像素小脚会交替抬起，展现灵动的走位。
- **动态瞳孔**：正常/沉迷状态下为可爱圆瞳，逃跑/警惕状态下自动切换为锐利的立瞳。

### 2. 状态反馈颜色
- **正常**：根据猫咪品种显示对应主色（如波斯猫白色、暹罗猫奶油色等）
- **逃跑**：红色色调
- **沉迷**：绿色色调
- **被抓**：显示被抓取特效

### 3. 🎮 UI 与交互优化 (最新更新)
- **极简主义 UI**：默认隐藏所有调试信息，让玩家专注于捕捉猫咪的乐趣。
- **一键调试切换 (F1)**：
    - 按下 `F1` 键可唤起带有半透明背景的专业调试面板。
    - 包含：FPS、玩家坐标、地图数据、详细猫咪状态列表、沉迷时间算法等。
- **胜利仪式感**：抓捕完成后显示醒目的 "MISSION ACCOMPLISHED!" 全屏提示。
- **操作指引**：底部精简的快捷键提示栏。

## ✅ 完成清单

- [x] 创建Catnip类（头文件+实现）
- [x] 修改Cat类添加状态机
- [x] **重构Cat渲染逻辑：实现无缝实体像素风**
- [x] **实现猫咪动态转向与呼吸动画**
- [x] **实现 UI 隐藏/显示切换功能 (F1 调试模式)**
- [x] 实现三种AI行为
- [x] 修改Player类添加抛出功能
- [x] 集成到main.cpp
- [x] 修复所有编译错误（重复定义、括号匹配等）
- [x] 测试验证：猫咪已能“脚踏实地”灵动行走

## 🚀 创新构思：猫咪宝可梦 (Meowmon Evolution)

为了让游戏更具深度和“宝可梦”式的收集乐趣，我为你构思了以下几个进阶方向，可以作为下一阶段的开发目标：

### 1. 🌈 变异与稀有度系统 (Mutation & Rarity)
*   **闪光猫咪 (Shiny Pixels)**：极低概率出现具有“极光粒子”特效的像素猫，或者拥有特殊的像素配色（如金属金、星空紫）。
*   **性格差异**：
    - **胆小**：逃跑范围更大，速度极快。
    - **贪吃**：对猫薄荷的沉迷时间延长，更容易被吸引。
    - **好奇**：偶尔会主动靠近玩家，但一旦玩家移动就会瞬间跳开。

### 3. 🎒 收集与羁绊 (Collection & Bond)
*   **猫咪图鉴 (Meow-dex)**：抓到的猫咪会记录在图鉴中，解锁它们的“像素生物研究日志”。
*   **猫窝系统**：抓到的猫咪不再只是消失，而是可以被放养在“玩家猫窝”主界面，玩家可以与它们互动。

### 4. 🏠 电子宠物养成系统 (Meow-Care: From Capture to Companion)
从简单的“抓取”机制升级为深度的“养成”机制，让每只被捕获的猫咪成为真正的伙伴：
*   **成长数值属性**：
    *   **饥饿度 (Hunger)**：需要定期喂食捕获的各种猫粮。
    *   **心情值 (Happiness)**：通过抚摸、玩耍（如逗猫棒互动）提升。
    *   **体力值 (Stamina)**：影响猫咪在猫窝中的活跃度，通过休息恢复。
*   **进化与装扮**：
    *   **亲密度等级**：随着亲密度提升，解锁特殊的猫咪动作（如踩奶、翻滚）。
    *   **饰品系统**：使用抓猫获得的积分购买像素风格的小围巾、蝴蝶结等饰品。
*   **资源循环**：
    *   **心情产出**：心情愉悦的猫咪会定期产出“猫币”或“猫毛球”，用于在商店兑换更高级的猫薄荷和抓捕道具。
    *   **养成反馈**：养成的猫咪属性越高，未来在野外遇到同类品种时，捕获成功率会有额外加成。

## ✅ 完成清单⚔️ 技能与成长 (Skills & Growth)
*   **独特的逃跑技**：
    - **分身**：某些高阶猫咪受惊时会产生像素残影，迷惑玩家。
    - **隐身**：孟加拉猫可能会在草丛中进入半透明状态。
*   **玩家道具升级**：
    - **特制猫薄荷**：增加吸引范围或持续时间。
    - **自动投食器**：可以在地面放置一个持续吸引猫咪的固定点。

### 4. 🌙 昼夜与环境互动 (Environment)
*   **夜猫子模式**：某些稀有品种（如黑猫）只在游戏内时间的夜晚出现，且眼睛会发出更亮的像素光芒。
*   **草丛掩护**：猫咪在长草丛中移动速度变慢，但更难被发现。

---

## 🚀 游戏优势

1. **艺术感染力**：复古像素风结合现代动态逻辑，让每个猫咪都有独特的灵魂。
2. **策略性**：需要预判猫咪逃跑路线，合理投掷猫薄荷。
3. **互动性**：物理模拟的抛投机制与猫咪的灵敏反应。
4. **视觉清晰**：状态切换不仅有颜色变化，还有瞳孔和表情的细节差异。

## 🎯 设计亮点

- **精准投掷**：朝向鼠标，直观控制方向，轨迹自然。
- **无缝像素魂**：解决了传统像素渲染的“漏风”感，视觉体验更扎实。
- **灵动互动**：猫咪会“回头看”，会“喘气”，极大地增强了代入感。
- **品种差异化**：不同品种的猫咪拥有不同的基础属性和逃跑策略。
